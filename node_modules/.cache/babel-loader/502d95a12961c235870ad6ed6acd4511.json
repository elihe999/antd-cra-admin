{"ast":null,"code":"import \"antd/lib/table/style\";\nimport _Table from \"antd/lib/table\";\nimport \"antd/lib/icon/style\";\nimport _Icon from \"antd/lib/icon\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport _defineProperty from \"/home/eligit2/ateapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/eligit2/ateapp/src/components/tables/SearchTable.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n/**\r\n * Created by hao.cheng on 2017/4/16.\r\n */\nimport React from 'react';\nconst data = [{\n  key: '1',\n  name: 'John Brown',\n  age: 32,\n  address: 'New York No. 1 Lake Park'\n}, {\n  key: '2',\n  name: 'Joe Black',\n  age: 42,\n  address: 'London No. 1 Lake Park'\n}, {\n  key: '3',\n  name: 'Jim Green',\n  age: 32,\n  address: 'Sidney No. 1 Lake Park'\n}, {\n  key: '4',\n  name: 'Jim Red',\n  age: 32,\n  address: 'London No. 2 Lake Park'\n}];\n\nclass SearchTable extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      filterDropdownVisible: false,\n      data,\n      searchText: '',\n      filtered: false\n    };\n    this.searchInput = void 0;\n\n    this.onInputChange = e => {\n      this.setState({\n        searchText: e.target.value\n      });\n    };\n\n    this.onSearch = () => {\n      const searchText = this.state.searchText;\n      const reg = new RegExp(searchText, 'gi');\n      this.setState({\n        filterDropdownVisible: false,\n        filtered: !!searchText,\n        data: data.map(record => {\n          const match = record.name.match(reg);\n\n          if (!match) {\n            return null;\n          }\n\n          return _objectSpread({}, record, {\n            name: React.createElement(\"span\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 60\n              },\n              __self: this\n            }, record.name.split(reg).map((text, i) => i > 0 ? [React.createElement(\"span\", {\n              className: \"highlight\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 65\n              },\n              __self: this\n            }, match[0]), text] : text))\n          });\n        }).filter(record => !!record)\n      });\n    };\n  }\n\n  render() {\n    const columns = [{\n      title: 'Name',\n      dataIndex: 'name',\n      key: 'name',\n      filterDropdown: React.createElement(\"div\", {\n        className: \"custom-filter-dropdown\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(_Input, {\n        ref: ele => this.searchInput = ele,\n        placeholder: \"Search name\",\n        value: this.state.searchText,\n        onChange: this.onInputChange,\n        onPressEnter: this.onSearch,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }), React.createElement(_Button, {\n        type: \"primary\",\n        onClick: this.onSearch,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, \"Search\")),\n      filterIcon: React.createElement(_Icon, {\n        type: \"smile-o\",\n        style: {\n          color: this.state.filtered ? '#108ee9' : '#aaa'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }),\n      filterDropdownVisible: this.state.filterDropdownVisible,\n      onFilterDropdownVisibleChange: visible => this.setState({\n        filterDropdownVisible: visible\n      }, () => this.searchInput.focus())\n    }, {\n      title: 'Age',\n      dataIndex: 'age',\n      key: 'age'\n    }, {\n      title: 'Address',\n      dataIndex: 'address',\n      key: 'address',\n      filters: [{\n        text: 'London',\n        value: 'London'\n      }, {\n        text: 'New York',\n        value: 'New York'\n      }],\n      onFilter: (value, record) => record.address.indexOf(value) === 0\n    }];\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(_Table, {\n      columns: columns,\n      dataSource: this.state.data,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }), React.createElement(\"style\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, \"\\n                    .custom-filter-dropdown {\\n                      padding: 8px;\\n                      border-radius: 6px;\\n                      background: #fff;\\n                      box-shadow: 0 1px 6px rgba(0, 0, 0, .2);\\n                    }\\n                    .custom-filter-dropdown input {\\n                      width: 130px;\\n                      margin-right: 8px;\\n                    }\\n                    .highlight {\\n                      color: #f50;\\n                    }\\n                \"));\n  }\n\n}\n\nexport default SearchTable;","map":{"version":3,"sources":["/home/eligit2/ateapp/src/components/tables/SearchTable.tsx"],"names":["React","data","key","name","age","address","SearchTable","Component","state","filterDropdownVisible","searchText","filtered","searchInput","onInputChange","e","setState","target","value","onSearch","reg","RegExp","map","record","match","split","text","i","filter","render","columns","title","dataIndex","filterDropdown","ele","filterIcon","color","onFilterDropdownVisibleChange","visible","focus","filters","onFilter","indexOf"],"mappings":"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","sourcesContent":["/**\r\n * Created by hao.cheng on 2017/4/16.\r\n */\r\nimport React from 'react';\r\nimport { Table, Input, Button, Icon } from 'antd';\r\n\r\nconst data = [\r\n    {\r\n        key: '1',\r\n        name: 'John Brown',\r\n        age: 32,\r\n        address: 'New York No. 1 Lake Park',\r\n    },\r\n    {\r\n        key: '2',\r\n        name: 'Joe Black',\r\n        age: 42,\r\n        address: 'London No. 1 Lake Park',\r\n    },\r\n    {\r\n        key: '3',\r\n        name: 'Jim Green',\r\n        age: 32,\r\n        address: 'Sidney No. 1 Lake Park',\r\n    },\r\n    {\r\n        key: '4',\r\n        name: 'Jim Red',\r\n        age: 32,\r\n        address: 'London No. 2 Lake Park',\r\n    },\r\n];\r\n\r\nclass SearchTable extends React.Component {\r\n    state = {\r\n        filterDropdownVisible: false,\r\n        data,\r\n        searchText: '',\r\n        filtered: false,\r\n    };\r\n    searchInput: any;\r\n    onInputChange = (e: any) => {\r\n        this.setState({ searchText: e.target.value });\r\n    };\r\n    onSearch = () => {\r\n        const { searchText } = this.state;\r\n        const reg = new RegExp(searchText, 'gi');\r\n        this.setState({\r\n            filterDropdownVisible: false,\r\n            filtered: !!searchText,\r\n            data: data\r\n                .map(record => {\r\n                    const match = record.name.match(reg);\r\n                    if (!match) {\r\n                        return null;\r\n                    }\r\n                    return {\r\n                        ...record,\r\n                        name: (\r\n                            <span>\r\n                                {record.name\r\n                                    .split(reg)\r\n                                    .map((text, i) =>\r\n                                        i > 0\r\n                                            ? [<span className=\"highlight\">{match[0]}</span>, text]\r\n                                            : text\r\n                                    )}\r\n                            </span>\r\n                        ),\r\n                    };\r\n                })\r\n                .filter(record => !!record),\r\n        });\r\n    };\r\n    render() {\r\n        const columns = [\r\n            {\r\n                title: 'Name',\r\n                dataIndex: 'name',\r\n                key: 'name',\r\n                filterDropdown: (\r\n                    <div className=\"custom-filter-dropdown\">\r\n                        <Input\r\n                            ref={ele => (this.searchInput = ele)}\r\n                            placeholder=\"Search name\"\r\n                            value={this.state.searchText}\r\n                            onChange={this.onInputChange}\r\n                            onPressEnter={this.onSearch}\r\n                        />\r\n                        <Button type=\"primary\" onClick={this.onSearch}>\r\n                            Search\r\n                        </Button>\r\n                    </div>\r\n                ),\r\n                filterIcon: (\r\n                    <Icon\r\n                        type=\"smile-o\"\r\n                        style={{ color: this.state.filtered ? '#108ee9' : '#aaa' }}\r\n                    />\r\n                ),\r\n                filterDropdownVisible: this.state.filterDropdownVisible,\r\n                onFilterDropdownVisibleChange: (visible: boolean) =>\r\n                    this.setState({ filterDropdownVisible: visible }, () =>\r\n                        this.searchInput.focus()\r\n                    ),\r\n            },\r\n            {\r\n                title: 'Age',\r\n                dataIndex: 'age',\r\n                key: 'age',\r\n            },\r\n            {\r\n                title: 'Address',\r\n                dataIndex: 'address',\r\n                key: 'address',\r\n                filters: [\r\n                    {\r\n                        text: 'London',\r\n                        value: 'London',\r\n                    },\r\n                    {\r\n                        text: 'New York',\r\n                        value: 'New York',\r\n                    },\r\n                ],\r\n                onFilter: (value: any, record: any) => record.address.indexOf(value) === 0,\r\n            },\r\n        ];\r\n        return (\r\n            <div>\r\n                <Table columns={columns} dataSource={this.state.data} />\r\n                <style>{`\r\n                    .custom-filter-dropdown {\r\n                      padding: 8px;\r\n                      border-radius: 6px;\r\n                      background: #fff;\r\n                      box-shadow: 0 1px 6px rgba(0, 0, 0, .2);\r\n                    }\r\n                    .custom-filter-dropdown input {\r\n                      width: 130px;\r\n                      margin-right: 8px;\r\n                    }\r\n                    .highlight {\r\n                      color: #f50;\r\n                    }\r\n                `}</style>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default SearchTable;\r\n"]},"metadata":{},"sourceType":"module"}